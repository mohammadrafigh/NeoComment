<ActionBar flat="true">
  <GridLayout columns="auto, *, auto" class="pr-4 py-2 w-full">
    <Button
      text="&#xea60;"
      class="tabler-icon icon-button"
      col="0"
      (tap)="location.back()"
    ></Button>
    <Label
      [text]="pageTitle()"
      class="font-medium text-lg text-center"
      col="1"
    ></Label>
    <StackLayout col="2" class="w-10"></StackLayout>
  </GridLayout>
</ActionBar>

<GridLayout>
  <CollectionView
    [items]="postsStateService.postReplies[post.id]()"
    colWidth="100%"
    class="p-4 bg-primary-300-15 h-full"
    (itemTap)="navigateToPost($event)"
  >
    <ng-template let-item="item">
      <StackLayout>
        <ns-post-item
          [post]="item"
          [isLiking]="postsStateService.likingPostIds().includes(item.id)"
          [isBoosting]="postsStateService.boostingPostIds().includes(item.id)"
          [isEditable]="item.account.id === stateService.fediAccount().id"
          (likePressed)="postsStateService.toggleLike(item)"
          (boostPressed)="postsStateService.toggleBoost(item)"
          (editPressed)="addEditSheet(item)"
          (replyPressed)="
            postEditorsService.showReplySheet(containerRef, {
              replyingPost: item,
            })
          "
        ></ns-post-item>
      </StackLayout>
    </ng-template>
  </CollectionView>

  <StackLayout
    class="m-4"
    horizontalAlignment="center"
    verticalAlignment="bottom"
    [hidden]="!pageLoading()"
  >
    <ActivityIndicator [busy]="pageLoading()" />
  </StackLayout>
</GridLayout>
